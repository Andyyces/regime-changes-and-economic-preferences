---
title: "Regime Changes and Economic Preferences: Global Evidence"
subtitle: "Milestone 4: Empirical Results"
author: "Andrea Češková and Elvin Mammadov"
format: 
  pdf:
    reference-location: document
number-sections: true
toc: true
crossref:
  fig-title: "Figure"
  tbl-title: "Table"
  eq-title: "Equation"
  lot-title: "List of figures"
bibliography: references.bib
link-citations: true
---

```{r}
#| message: false
#| warning: false
#| include: false
library(pacman)
p_load(here,
       kableExtra,
       dplyr,
       modelsummary,
       knitr)
```

```{r}
#| eval: false
#| include: false
#  Load the function from extract_codes.R
script_files <- list.files(
  path = here("R", "Script"),
  pattern = "\\.R$",
  full.names = TRUE
)

# source everything with frequency
walk(script_files, source)
```

```{r loading all models+formatted data if needed}
#| include: false

# Data
final_data_gdp <- readRDS(here("Input", "clean", "final_data_gdp.rds"))

# Models
#regime_change model
preference_models <- readRDS(here("Output", "Models", "regime_change_models.rds"))

# Models without controls
hetero_models <- readRDS(here("Output", "Models", "hetero_models.rds"))
hetero_models_autoc <- readRDS(here("Output", "Models", "hetero_models_autoc.rds"))
hetero_models_democ <- readRDS(here("Output", "Models", "hetero_models_democ.rds"))

# Models with controls
hetero_models_controls <- readRDS(here("Output", "Models", "hetero_models_controls.rds"))
hetero_models_autoc_controls <- readRDS(here("Output", "Models", "hetero_models_autoc_controls.rds"))
hetero_models_democ_controls <- readRDS(here("Output", "Models", "hetero_models_democ_controls.rds"))

model_names <- c("Patience", "Risk taking", "Positive reciprocity", "Negative reciprocity", "Altruism", "Trust")
```

# Estimation Strategy

We employ a two-way fixed effects (TWFE) specification to identify the causal effect of regime changes exposure during formative years (3-18) on economic preferences. Information about the econometric specification of our models can be found in the previous Milestone report. In the current Milestone report, we present results from three complementary specifications. All of our approaches leverage within-region variation across birth cohorts while controlling for time.invariant regional characteristics and common temporal shocks affecting all individuals born in the same year.

A critical feature of our identification strategy is that **the control group consists exclusively of individuals from countries that never experienced any regime change during our study period**. This design choice eliminates potential spillover effects and contamination that would arise from including individuals who lived through regime changes as adults.

Our treatment group includes individuals who experienced regime changes during their formative years (ages 3-18), while our control group comprises individuals from politically stable countries—those that maintained consistent political institutions throughout the entire period covered by our data. This clean separation between treated and control groups strengthens the causal identification by ensuring that control group individuals have no direct or indirect exposure to regime changes.

This approach addresses the concern that adults experiencing regime changes might also be affected, which would contaminate a within-country control group. By using only stable countries as controls, we isolate the effect of experiencing political transitions during the critical developmental period.

We estimate models with and without controls to assess the robustness of our findings:

-   Combined effects model: Our first model, where we pooled all regime changes regardless of direction of change

-   Base model: Separated democratization and autocratization effects without controls

-   Full model with controls: Includes economic and institutional controls

# Combined effects model

We first estimate a model that pools all regime changes together, regardless of direction. This specification provides the average effect of experiencing any political instability during formative years and tests whether regime changes per se—independent of their direction—influence preference formation. The results are shown in the following table.

```{r combined effects}
#| echo: false
msummary(
  preference_models,
  stars = TRUE,
  coef_rename = c(
    "formative_regime_change" = "Regime Change Experience"
  ),
  notes = list("Standard errors in parentheses."),
  output = "kableExtra",
  fmt = 3,
  statistic = "({std.error})",
  gof_omit = "R2 Within|R2 Within Adj.|AIC|BIC|RMSE",
  title = "Combined Effects specification"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover"),
    latex_options = c("HOLD_position", "scale_down", "striped", "booktabs"),
    full_width = FALSE
  ) %>%
  column_spec(1, width = "4cm") %>%
  add_header_above(c(" " = 1, "Outcome variables" = 6)) 
```

# Base model specification

## Combined: Autocratization and Democratization

```{r}
#| echo: false
msummary(
  hetero_models,
  stars = TRUE,
  coef_rename = c(
    "democratization" = "Democratization",
    "autocratization" = "Autocratization", 
    "avg_gdppc_formative" = "Log of Average GDP per Capita  during formative years",
    "avg_libdem_formative" = "Average LDI during formative years",
    "recession_formative" = "Recession experienced during formative years"
  ),
  notes = list("Standard errors in parentheses."),
  output = "kableExtra",
  fmt = 3,
  statistic = "({std.error})",
  gof_omit = "R2 Within|R2 Within Adj.|AIC|BIC|RMSE",
  title = "Base model specification: Combined"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover"),
    latex_options = c("HOLD_position", "scale_down", "striped", "booktabs"),
    full_width = FALSE
  ) %>%
  column_spec(1, width = "4cm") %>%
  add_header_above(c(" " = 1, "Outcome variables" = 6)) 
```

## Heterogenous Effects by Transtition Type

### Democratization

```{r}
#| echo: false
msummary(
  hetero_models_democ,
  stars = TRUE,
  coef_rename = c(
    "democratization" = "Democratization",
    "autocratization" = "Autocratization", 
    "avg_gdppc_formative" = "Log of Average GDP per Capita  during formative years",
    "avg_libdem_formative" = "Average LDI during formative years",
    "recession_formative" = "Recession experienced during formative years"
  ),
  notes = list("Standard errors in parentheses."),
  output = "kableExtra",
  fmt = 3,
  statistic = "({std.error})",
  gof_omit = "R2 Within|R2 Within Adj.|AIC|BIC|RMSE",
  title = "Base model specification: Democratization"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover"),
    latex_options = c("HOLD_position", "scale_down", "striped", "booktabs"),
    full_width = FALSE
  ) %>%
  column_spec(1, width = "4cm") %>%
  add_header_above(c(" " = 1, "Outcome variables" = 6)) 
```

### Autocratization

```{r}
#| echo: false
msummary(
  hetero_models_autoc,
  stars = TRUE,
  coef_rename = c(
    "democratization" = "Democratization",
    "autocratization" = "Autocratization", 
    "avg_gdppc_formative" = "Log of Average GDP per Capita  during formative years",
    "avg_libdem_formative" = "Average LDI during formative years",
    "recession_formative" = "Recession experienced during formative years"
  ),
  notes = list("Standard errors in parentheses."),
  output = "kableExtra",
  fmt = 3,
  statistic = "({std.error})",
  gof_omit = "R2 Within|R2 Within Adj.|AIC|BIC|RMSE",
  title = "Base model specification: Autocratization"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover"),
    latex_options = c("HOLD_position", "scale_down", "striped", "booktabs"),
    full_width = FALSE
  ) %>%
  column_spec(1, width = "4cm") %>%
  add_header_above(c(" " = 1, "Outcome variables" = 6)) 
```

# Specification with Controls

```{r}
#| echo: false
msummary(
  hetero_models_controls,
  stars = TRUE,
  coef_rename = c(
    "democratization" = "Democratization",
    "autocratization" = "Autocratization", 
    "avg_gdppc_formative" = "Log of Average GDP per Capita  during formative years",
    "avg_libdem_formative" = "Average LDI during formative years",
    "recession_formative" = "Recession experienced during formative years"
  ),
  notes = list("Standard errors in parentheses."),
  output = "kableExtra",
  fmt = 3,
  statistic = "({std.error})",
  gof_omit = "R2 Within|R2 Within Adj.|AIC|BIC|RMSE",
  title = "Base model specification: Combined with controls"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover"),
    latex_options = c("HOLD_position", "scale_down", "striped", "booktabs"),
    full_width = FALSE
  ) %>%
  column_spec(1, width = "4cm") %>%
  add_header_above(c(" " = 1, "Outcome variables" = 6)) 
```

## Heterogenous Effects by Transtition Type

### Democratization

```{r}
#| echo: false
msummary(
  hetero_models_democ_controls,
  stars = TRUE,
  coef_rename = c(
    "democratization" = "Democratization",
    "autocratization" = "Autocratization", 
    "avg_gdppc_formative" = "Log of Average GDP per Capita  during formative years",
    "avg_libdem_formative" = "Average LDI during formative years",
    "recession_formative" = "Recession experienced during formative years"
  ),
  notes = list("Standard errors in parentheses."),
  output = "kableExtra",
  fmt = 3,
  statistic = "({std.error})",
  gof_omit = "R2 Within|R2 Within Adj.|AIC|BIC|RMSE",
  title = "Base model specification: Democratization with controls"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover"),
    latex_options = c("HOLD_position", "scale_down", "striped", "booktabs"),
    full_width = FALSE
  ) %>%
  column_spec(1, width = "4cm") %>%
  add_header_above(c(" " = 1, "Outcome variables" = 6)) 
```

### Autocratization

```{r}
#| echo: false
msummary(
  hetero_models_autoc_controls,
  stars = TRUE,
  coef_rename = c(
    "democratization" = "Democratization",
    "autocratization" = "Autocratization", 
    "avg_gdppc_formative" = "Log of Average GDP per Capita  during formative years",
    "avg_libdem_formative" = "Average LDI during formative years",
    "recession_formative" = "Recession experienced during formative years"
  ),
  notes = list("Standard errors in parentheses."),
  output = "kableExtra",
  fmt = 3,
  statistic = "({std.error})",
  gof_omit = "R2 Within|R2 Within Adj.|AIC|BIC|RMSE",
  title = "Base model specification: Autocratization with controls"
) %>%
  kable_styling(
    bootstrap_options = c("striped", "hover"),
    latex_options = c("HOLD_position", "scale_down", "striped", "booktabs"),
    full_width = FALSE
  ) %>%
  column_spec(1, width = "4cm") %>%
  add_header_above(c(" " = 1, "Outcome variables" = 6)) 
```

# Robustness of Results

The robustness will be examined in the last Milestone report.

# Limitations

# Implications
