---
title: "Regime Changes and Economic Preferences: Global Evidence"
subtitle: "Milestone 3: Econometric Approach"
author: "Andrea Češková and Elvin Mammadov"
format: 
  pdf:
    reference-location: document
number-sections: true
toc: true
crossref:
  fig-title: "Figure"
  tbl-title: "Table"
  eq-title: "Equation"
  lot-title: "List of figures"
bibliography: references.bib
link-citations: true
---

```{r}
#| message: false
#| warning: false
#| include: false
#  Load the function from extract_codes.R

source("../Input/extract_codes.R")

#  Use it to extract code from the Rmd into an R script
extract_r_code_from_rmd("../Input/Data loading + wrangling.Rmd", "../Input/data_wrangle.R")

#  Run the extracted R code
source("../Input/data_wrangle.R")

write_dta(final_data_gdp, path = "../Input/final_data_gdp.dta")

```

# Economic model

As Detlefsen et al. [-@detlefsen_are_2024] points out, the formation of economic preferences in **childhood** and **adolescence** has a long-term consequences for life outcomes. To provide an example, patience can impact one's school performance, which can later translate to education attainment and labor market outcomes. The same way can risk preference impact one's financial decisions [@detlefsen_are_2024].

According to the National Library of Medicine, childhood is defined as a stage from **3-11 years** and adolescence as a stage from **12-18 years**[@balasundaram_human_2025].

Building on the foundational work of [@fuchs-schundeln_endogeneity_2015], we propose a theoretical framework to understand how regime changes during formative years shape economic preferences through multiple channels.

Economic preferences $(P)$ of an individual $i$ from country $c$ born in year $t$ can be represented as: $P_{i,c,t} = f(I_{c,t+a}, E_{c,t+a}, S_{c,t+a}, X_i)$

Where:

-   $I_{c,t+a}$ represents institutional quality during formative years (ages $a \in [3,18]$)

-   $E_{c,t+a}$ represents economic conditions during formative years (GDP per capita)

-   $X_i$ represents individual characteristics (subjevtice math skills)

Specifically, regime changes represent significant shifts in $I_{c,t+a}$, which create discontinuous changes in institutional environments experienced during critical developmental periods. This framework builds upon studies showing preference malleability during early life [@falk_global_2018; @kosse_formation_2020] and extends them to the domain of political institutions. According to the research of @detlefsen_are_2024, the years of childhood and adolescence are particularly sensitive for economic preference formation.

When a regime change occurs, we hypothesize several mechanisms through which preferences are affected:

-   **Trust mechanism**: Sudden institutional changes may create uncertainty about rule enforcement, potentially reducing interpersonal trust.

-   **Risk preference mechanism**: Experiencing regime instability may alter risk perception through changes in perceived environmental predictability.

-   **Time preference mechanism**: Political instability can change discount rates by affecting perceptions of future stability.

-   **Social preference mechanism**: Shifts in social norms and expectations during regime changes may influence altruism and reciprocity.

# Setting

## Data Sources and Sample

Our analysis combines two primary data sources:

-   **Vdem** [@coppedge_v-dem_2025] dataset comes also as an R package:`vdemdata`. This dataset contains various democracy indicators for 202 countries starting of year 1789. We will be using the **Liberal democracy index** which combines many of these indicators into a single number for each country/year.

-   **Global Preference Survey** [@falk_global_2018] dataset was downloaded as a ZIP file from the [following website](https://gps.iza.org/downloads). This dataset contains information about economic preferences of 80337 individuals from 76 countries. The survey was conducted between 2012 and 2013.

## Endogenous Variable: Regime Change exposure

Our main endogenous variable is a **binary indicator** for experiencing a significant regime change during formative years (ages 3-18). We define regime changes using the **Liberal Democracy Index** **(LDI)** from V-Dem, which measures the extent to which democratic principles are respected in a country on a scale from **0 (autocracy) to 1 (liberal democracy)**. Together with the binary indicator we also capture the **direction of change** (democratization or autocratization).

We identify significant regime changes using a stricter threshold ($|\Delta\text{LDI}| > 0.1$ over a 10-year period) than previous literature [@luhrmann_autocratization_2020] to focus on **substantial political transformations rather than gradual changes**. This modification allows us to capture more disruptive institutional changes that are more likely to affect preference formation.

The regime changes are identified first on a country level according to the V-Dem dataset and then combined with the individual level data from the General Preference Survey. Goal is to **differenciate between individuals who experienced a regime change during their formative years** and individuals, who didn't.

The precise identification follows this procedure:

1.  First we compute the change in a country's Liberal Democracy Index according to the following notation: $\Delta\text{LDI} = \text{LDI}_t - \text{LDI}_{t-10}$. This creates a rolling comparison rather than a fixed window, allowing us to evaluate changes for every available year in the dataset.

2.  In the next step, we evaluate the following condition: $|\Delta\text{LDI}| > 0.1$. This is our threshold to what we consider a "substantial " change. The absolute value means we are measuring the magnitude of change regardless of direction (democratization or autocratization). A change greater than this threshold represents a meaningful shift in democratic quality that exceed typical measurement noise or minor fluctuations.

3.  In the next step we test the statistical significance of the change. The expression for significance:

$\text{CI}_t = [\text{LDI}_t - \text{ME}_t, \text{LDI}_t + \text{ME}_t]$

$\text{CI}_{t-10} = [\text{LDI}_{t-10} - \text{ME}_{t-10}, \text{LDI}_{t-10} + \text{ME}_{t-10}]$

$\text{Significant if: } \text{CI}_t \cap \text{CI}_{t-10} = \emptyset$

Margin Error is calculated in the following way: $\text{ME} = z \times \frac{\sigma}{\sqrt{n}}$

In this step we also differenciate between the **direction of the change**, either from **autocracy to democracy** and from **democracy to autocracy.**

4.  In the next step we move on to the **individual level** data from the **General Preference Survey**. We evaluate each individual living at the year determined in previous step in a given country. If the individual was in his **formative years (between 3-18 years old)** at this time, he is assigned the **treatment**.

Our **control group** on the other hand consists of **individuals, who never experienced a regime change**. Applying this algorithm on our data, we receive the following number of observations in each category:

```{r}
#| echo: false
#| label: tbl-c
#| tbl-cap: Number of observations in treatment and control group
#| tbl-pos: "H"
table(final_data$formative_regime_change)
```

## Outcome Variables: Economic Preferences

Our main outcome variables are six standardized economic preferences from the GPS:

1.  **Trust**: Willingness to trust others in social interactions

2.  **Patience**: Willingness to forego immediate rewards for larger future rewards

3.  **Risk-Taking**: Willingness to take risks in various domains

4.  **Positive Reciprocity**: Willingness to reward kind actions

5.  **Negative Reciprocity**: Willingness to punish unkind actions

6.  **Altruism**: Willingness to give to others without expecting returns

Each preference is standardized to have a mean of 0 and standard deviation of 1 in the global sample, allowing us to compare across preferences and countries.

## Preliminary evidence

In the next step, we examined the magnitude of the differences in economic preferences between the treatment and control group. In the following @fig-a we visualize the mean preference profiles of the two groups.

```{r}
#| echo: false
#| label: fig-a
#| warning: false
#| results: 'asis'
#| fig-cap: "Mean Preference Profiles by Regime Change Exposure"
#| fig-cap-location: top
#| fig-pos: "H"
p_load(dplyr,
       kableExtra)
long_data <- final_data_gdp %>%
  pivot_longer(
    cols = c(trust, patience, risktaking, posrecip, negrecip, altruism),
    names_to = "preference_type",
    values_to = "value"
  ) %>%
  mutate(preference_type = str_to_title(preference_type))

# Change the formative_regime_change factor levels and labels
long_data <- long_data %>%
  mutate(formative_regime_change = case_when(
    formative_regime_change == 0 ~ "Control",
    formative_regime_change == 1 ~ "Treated",
    TRUE ~ as.character(formative_regime_change)
  ))

# Calculating group means and confidence intervals
group_means <- long_data %>%
  group_by(formative_regime_change, preference_type) %>%
  summarise(
    mean_value = mean(value, na.rm = TRUE),
    se = sd(value, na.rm = TRUE) / sqrt(n()),
    ci_lower = mean_value - 1.96 * se,
    ci_upper = mean_value + 1.96 * se,
    .groups = "drop"
  )

# Order factors to make Treated come FIRST so it gets the first color (red in Set1)
group_means$formative_regime_change <- factor(
  group_means$formative_regime_change,
  levels = c("Treated", "Control")
)

# Ordering from smallest to highest differences between groups
differences <- group_means %>%
  select(preference_type, formative_regime_change, mean_value) %>%
  pivot_wider(names_from = formative_regime_change, values_from = mean_value) %>%
  mutate(difference = abs(Treated - Control)) %>%
  arrange(difference) %>%
  select(preference_type, difference)

# Create ordered factor for preference_type based on differences
group_means$preference_type <- factor(group_means$preference_type, 
                                      levels = differences$preference_type)

grouped_bar_plot <- ggplot(group_means, aes(x = preference_type, y = mean_value, fill = formative_regime_change)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.8), width = 0.7) +
  geom_text(aes(label = round(mean_value, 3)), 
            position = position_dodge(width = 0.8), 
            vjust = ifelse(group_means$mean_value >= 0, -0.3, 1.2),
            size = 3.5,
            fontface = "bold") +
  scale_fill_manual(values = c("Treated" = "#D62728", "Control" = "#1F77B4"),
                    name = "Group") +
  scale_y_continuous(expand = expansion(mult = c(0.1, 0.1))) +  # Add space for labels
  theme_minimal() +
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    axis.text.x = element_text(angle = 45, hjust = 1),
    axis.title = element_text(size = 12),
    legend.position = "top"
  ) +
  labs(
    caption = "Mean values displayed above/below bars",
    x = element_blank(),
    y = "Mean Value"
  ) +
  geom_hline(yintercept = 0, linetype = "dotted", color = "gray50", size = 0.5)

# Print the plot
print(grouped_bar_plot)
```

In the table @tbl-preferences we examine the difference in mean in mean on a more formal level. We perform t-tests of the differences. All of them seems to be statistically significant on a 0.001 confidence level. These consistent and significant differences provide preliminary support for our hypothesis that regime changes during formative years have lasting impacts on economic preferences.

```{r}
#| include: false
# Function to perform t-tests and format results
create_ttest_table <- function(data, vars) {
  
  # Initialize results list
  results <- list()
  
  # Ensure formative_regime_change is numeric
  data$formative_regime_change <- as.numeric(data$formative_regime_change)
  
  # Control vs Treatment indicators
  control_group <- data$formative_regime_change == 0
  treatment_group <- data$formative_regime_change == 1
  
  # Check that we have both groups
  if(sum(control_group) == 0) stop("No control group (formative_regime_change = 0) found")
  if(sum(treatment_group) == 0) stop("No treatment group (formative_regime_change = 1) found")
  
  # For each variable, perform t-test and extract statistics
  for(var in vars) {
    # Extract values for control and treatment
    control_vals <- data[[var]][control_group]
    treat_vals <- data[[var]][treatment_group]
    
    # Remove NA values
    control_vals <- control_vals[!is.na(control_vals)]
    treat_vals <- treat_vals[!is.na(treat_vals)]
    
    # Calculate means and SDs
    control_mean <- mean(control_vals)
    control_sd <- sd(control_vals)
    treat_mean <- mean(treat_vals)
    treat_sd <- sd(treat_vals)
    
    # Perform t-test
    t_test <- t.test(treat_vals, control_vals)
    diff <- treat_mean - control_mean
    p_value <- t_test$p.value
    
    # Add significance stars
    stars <- ifelse(p_value < 0.001, "***",
                   ifelse(p_value < 0.01, "**",
                         ifelse(p_value < 0.05, "*",
                               ifelse(p_value < 0.1, "+", ""))))
    
    # Format the results
    control_text <- sprintf("%.3f\n(%.3f)", control_mean, control_sd)
    treat_text <- sprintf("%.3f\n(%.3f)", treat_mean, treat_sd)
    diff_text <- sprintf("%.3f%s\n(%.3f)", diff, stars, t_test$stderr)
    
    # Store results
    results[[var]] <- c(
      Variable = var,
      Control = control_text,
      Treatment = treat_text,
      Difference = diff_text
    )
  }
  
  # Convert to data frame
  table_df <- do.call(rbind, results)
  row.names(table_df) <- NULL
  
  # Create the table using kableExtra for PDF output
  require(kableExtra)
  
  # Clean variable names for display
  display_names <- c(
    trust = "Trust",
    patience = "Patience",
    risktaking = "Risk Taking",
    posrecip = "Positive Reciprocity",
    negrecip = "Negative Reciprocity",
    altruism = "Altruism",
    subj_math_skills = "Subjective Math Skills"
  )
  
  # Replace variable names with display names
  table_df[,1] <- ifelse(table_df[,1] %in% names(display_names), 
                        display_names[table_df[,1]], 
                        table_df[,1])
  
  # Create styled table (without caption - handle in document)
  kbl(table_df, 
      booktabs = TRUE,
      col.names = c("", "Control Group", "Treatment Group", "Difference"),
      align = c("l", "c", "c", "c"),
      escape = TRUE) %>%
    kable_styling() %>%
    add_header_above(c(" " = 1, "Mean (SD)" = 3)) %>%
    column_spec(1, width = "2.5cm") %>%
    column_spec(2:4, width = "2cm") %>%
    footnote(general = "Standard deviations in parentheses. Standard errors for differences in parentheses.",
             symbol = c("*** p<0.001, ** p<0.01, * p<0.05, + p<0.1"),
             threeparttable = TRUE,
             general_title = "Note:",
             escape = TRUE)
}
```

```{r}
#| echo: false
#| label: tbl-preferences
#| warning: false
#| results: 'asis'
#| tbl-cap: "Economic Preferences Comparison by Group"
#| tbl-pos: "H"
# Create the table
preferences_vars <- c("trust", "patience", "risktaking", "posrecip", "negrecip", "altruism")
preferences_table <- create_ttest_table(final_data_gdp, preferences_vars)

# Render the table
preferences_table
```

```{r}
#| label: tbl-controls
#| eval: false
#| warning: false
#| include: false
#| results: asis
#| tbl-cap: Control Variables Comparison by Group
#| tbl-pos: H
# Create the table
controls_vars <- c("age", "gdppc_2012", "subj_math_skills")
controls_table <- create_ttest_table(final_data_gdp, controls_vars)

# Render the table
controls_table
```

# Mechanism

## Theoretical Channels

We hypothesize that regime changes during formative years (ages 3-18) affect economic preferences through several interrelated channels:

1.  **Institutional Trust Channel**: Sudden changes in political institutions may disrupt children's developing sense of institutional reliability, potentially leading to long-lasting effects on general trust. When formal rules and enforcement mechanisms change dramatically, individuals may develop persistent skepticism about institutional stability, affecting their willingness to trust others [@alesina_good-bye_2007].
2.  **Uncertainty and Risk Perception Channel**: Political transitions often create periods of heightened uncertainty. Experiencing such uncertainty during formative years might permanently alter risk attitudes by changing how individuals evaluate the predictability of their environment [@malmendier_depression_2011].
3.  **Social Norm Disruption Channel**: Regime changes typically involve shifts in social norms and values. Children and adolescents, who are still internalizing social norms, may develop different patterns of reciprocity and altruism when exposed to changing or conflicting social expectations [@kosse_formation_2020].
4.  **Economic Insecurity Channel**: Political transitions frequently coincide with economic volatility. Economic hardship experienced during formative years may affect time preferences (patience) by altering how individuals value present versus future rewards [@haushofer_psychology_2014].

We cannot test the mechanism directly, but we test its implications through a **Two-way fixed effects (2FE)**:

-   Individuals are assigned to treatment if they experienced a regime change during their formative years.
-   All individuals are surveyed in the same period (2012--2013), minimizing confounding from external shocks.

## Testing the Mechanisms

While directly testing these psychological mechanisms is challenging with our cross-sectional data, we propose several indirect tests:

1.  **Heterogeneity by Transition Type**: Different channels may be more prominent depending on whether the transition was from autocracy to democracy or vice versa. We will test this by separating our treatment into democratization and autocratization events:

2.  **Mediation Analysis**: To test the economic insecurity channel, we will examine whether controlling for economic volatility measures (GDP fluctuations) during formative years attenuates the estimated treatment effect.

# Source of Bias and Identification

Our research design faces several identification challenges that we are planning to address through a combination of fixed effects, control variables, and robustness checks.

## Potential Biases and Directions

-   **Endogeneity of regime change exposure:**\
    Exposure is not randomly assigned. However, we exploit variation in **birth year within regions**, similar to the quasi-experimental logic in [@fuchs-schundeln_endogeneity_2015].

-   **Time-invariant region-level confounding:**\
    Region fixed effects absorb structural differences across space, such as geography, long-term culture or historical institutions.

-   **Common cohort shocks:**\
    Birth cohort fixed effects capture common temporal shocks (e.g., global crises) that may affect preferences across all individuals born in a given year.

-   **Residual selection bias:**\
    Countries or regions with more frequent regime changes may also differ economically or politically (e.g., lower GDP per capita). Including controls such as average GDP PC during formative years of individuals along with fixed effects, helps mitigate this concern.

# Econometric Specifications

## Baseline Model

Our baseline specification is a **two-way fixed effects (TWFE)** model that leverages variation in regime change exposure across birth cohorts and regions:

$$
Y_{ict} = \alpha + \beta \cdot \text{RegimeChange}_{ic} + \gamma_c + \delta_t + X_{ict} \cdot \text{(Controls)} + \varepsilon_{ict}
$$ Where:

-   **Outcome:** $Y_{ict}$: Economic preference outcome (trust, patience, etc.) for **individual** ( i ), **region** ( r ), **birth cohort** ( t )

-   **Treatment:** $\text{RegimeChange}_{ic}$: Binary treatment indicator (1 if experienced democratization/autocratization during formative years, 0 otherwise)

-   $\gamma_r$ : Region fixed effects that absorb time-invariant heterogeneity across regions

-   $\delta_t$ : Birth cohort fixed effects that absorb common shocks affecting all individuals born in year t

-   $X_{ict}$ : **Controls** including:

    -   Average LDI experienced during formative years (ages 3-18)

    -   Average GDP per capita of the country of residence during formative years (ages 3-18)

    -   Subjective math skills

The coefficient of interest, **β**, represents the average effect of experiencing a regime change during formative years on economic preferences, measured in standard deviation units. Under the **identifying assumptions** discussed in [Identification Strategy and Causal Interpretation], **β** can be interpreted as the causal effect of regime change exposure on preference formation.

## Heterogeneity by Transition Type

To distinguish between democratization and autocratization effects, we estimate:

$$Y_{ict} = \alpha + \beta_1 \cdot \text{Democratization}_{i,c} + \beta_2 \cdot \text{Autocratization}_{ic} + \gamma_c + \delta_t + X_{ict} \cdot \text{(Controls)} + \varepsilon_{ict}$$

Where:

-   $\text{Democratization}_{i,c}$ : Binary indicator equal to 1 if individual i experienced a significant **increase** in ($|\Delta\text{LDI}| > 0.1$) during formative years
-   $\text{Autocratization}_{i,c}$ : Binary indicator equal to 1 if individual i experienced a significant **decrease** in ($|\Delta\text{LDI}| < -0.1$) during formative years

# Identification Strategy and Causal Interpretation

## Identified Treatment Effect

Our empirical strategy aims to identify the Average Treatment Effect on the Treated (ATT), which represents the causal impact of experiencing a regime change during formative years on the economic preferences of individuals who were actually exposed to such changes. Formally, the ATT is defined as:

$$\text{ATT} = E[Y(1) - Y(0) | \text{RegimeChange} = 1]$$

Where $Y(1)$ represents potential preferences under treatment (experiencing regime change) and $Y(0)$ represents potential preferences without treatment, and the expectation is taken over the subpopulation of treated individuals.

## Causal Identification Assumptions

The TWFE estimator can provide valid causal ATT if the **conditional independence assumption (CIA)** holds. In our context, this assumption implies the following: Conditional on observed covariates, region fixed effects, and birth cohort fixed effects, assignment to treatment (exposure to regime change) **is as good as random**. Formally:

$$\{Y(0), Y(1)\} \perp \text{RegimeChange} | X, \gamma_c, \delta_t$$

Following assumptions must also hold:

-   **Stable Unit Treatment Value Assumption (SUTVA):**

    The potential outcomes for any individual are unaffected by the treatment status of other individuals, and there is only one version of treatment. This assumption could be violated if, for example, migration flows during regime changes create spillover effects across regions.

-   **Common Support/Overlap**

    Each individual has a positive probability of being both treated and untreated. This ensures that we have comparable treated and untreated individuals for each combination of covariates and fixed effects. Formally: $$0 < P(\text{RegimeChange} = 1 | X, \gamma_c, \delta_t) < 1$$

-   There are **no unobserved confounders** that vary simultaneously with both treatment assignment and the preference outcomes.

-   Individuals not exposed to regime change during formative years serve as a valid control group for those who were exposed.

While we cannot directly test all identification assumptions, we are planning to implement several tests to asses their plausibility.

## Limitations to Causal Interpretation

Despite our identification strategy, several limitations remain:

-   **Selective Migration**: Individuals (or their parents) might selectively migrate, potentially creating compositional changes in the population that confound treatment effects.

-   **Measurement of Formative Years**: Our definition of formative years (ages 3-18) is based on developmental psychology literature but may not perfectly capture critical periods for all preference types.

-   **Treatment Definition**: Our binary classification of regime changes may not capture all relevant political transitions that affect preference formation.

Given these limitations, we are planning to interpret our results as providing evidence for the causal effect of regime changes on preference formation under the stated assumptions, while acknowledging that alternative interpretations cannot be fully ruled out.

# References
